extends layout

block content
  h1 未着レコード
  if filter.carrier != undefined
    - const tmp = { dhl: 'DHLのみ', ems: 'EMSのみ', other: 'Air/SALのみ', all: '全体'}
    p= `${tmp[filter.carrier]} (${new Date(parseInt(filter.start))}　～　${new Date(parseInt(filter.end))})`
  table.table.table-dark.table-striped
    thead
      tr
        th(scope="col") DHL
        th(scope="col") EMS
        th(scope="col") Air/SAL
        th(scope="col") 合計
    tbody
      tr
        td= analyze.dhl_count
        td= analyze.ems_count
        td= analyze.other_count
        td= `${rows.length}件`
  table.table.table-dark.table-striped
    thead
      tr
        th(scope="col") 追跡番号
        th(scope="col") 国名（
          a(href="/mypage/undelivered_country") 全国
          | ）
        th(scope="col") 最新状況
        th(scope="col") 発送日から
    tbody
      - const edate = (new Date()).getTime()
      each row in rows
        - const timediff = Math.round((edate - row.shippeddate) / 86400000)
        tr
          td
            a(href=`/mypage/details/${row.tracking}`)= row.tracking
          td
            a(href=`/mypage/ucountry/${row.country}`)= row.country
          td= row.status.length > 30 ? row.status.slice(0, 30) + "..." : row.status
          td= `${timediff}日`
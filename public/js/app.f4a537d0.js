(function(t){function e(e){for(var r,d,o=e[0],i=e[1],c=e[2],l=0,h=[];l<o.length;l++)d=o[l],Object.prototype.hasOwnProperty.call(n,d)&&n[d]&&h.push(n[d][0]),n[d]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,d=1;d<a.length;d++){var i=a[d];0!==n[i]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},s=[];function d(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"f2b60ca3"}[t]+".js"}function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,r){a=n[t]=[e,r]}));e.push(a[2]=r);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.src=d(t);var c=new Error;s=function(e){i.onerror=i.onload=null,clearTimeout(l);var a=n[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",c.name="ChunkLoadError",c.type=r,c.request=s,a[1](c)}n[t]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(e)},o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00c6":function(t,e,a){},"034f":function(t,e,a){"use strict";var r=a("85ec"),n=a.n(r);n.a},"275d":function(t,e,a){"use strict";var r=a("b885"),n=a.n(r);n.a},3473:function(t,e,a){"use strict";var r=a("a4be"),n=a.n(r);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("link",{attrs:{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css",integrity:"sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z",crossorigin:"anonymous"}}),a("Header"),a("router-view"),a("script",{attrs:{type:"application/javascript",src:"https://code.jquery.com/jquery-3.5.1.slim.min.js",integrity:"sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj",crossorigin:"anonymous"}}),a("script",{attrs:{type:"application/javascript",src:"https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js",integrity:"sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN",crossorigin:"anonymous"}}),a("script",{attrs:{type:"application/javascript",src:"https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js",integrity:"sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV",crossorigin:"anonymous"}})],1)},s=[],d=a("2f62"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("Tracking tool")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown1",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Undelivered")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown1"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:"/undelivered"}},[t._v("All")]),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/undeliveredcountries"}},[t._v("Country")]),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/undeliveredstatus"}},[t._v("Status")])],1)]),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown2",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Delivered")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown2"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:"/delivered30"}},[t._v("Last 30 days")]),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/deliveredcountries90"}},[t._v("Country (90 days)")])],1)]),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown3",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("Tools")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown3"}},[a("router-link",{staticClass:"dropdown-item",attrs:{to:"/addrecords"}},[t._v("Add records")]),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/runtimelog"}},[t._v("Runtime log")]),a("router-link",{staticClass:"dropdown-item",attrs:{to:"/maintenance"}},[t._v("Maintenance")])],1)])])])],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],c={name:"Header"},l=c,u=a("2877"),h=Object(u["a"])(l,o,i,!1,null,"65f3e747",null),_=h.exports,v={name:"app",components:{Header:_},methods:Object(d["b"])(["fetchTrackings"]),created:function(){this.fetchTrackings()}},p=v,m=(a("034f"),Object(u["a"])(p,n,s,!1,null,null,null)),g=m.exports,f=(a("d3b7"),a("8c4f")),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-1"}),a("DataStatus"),a("div",{staticClass:"col-1"}),a("TrackingStatus"),a("div",{staticClass:"col-1"})],1),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("Undelivered count (rate)")]),a("table",{staticClass:"table table-striped table-dark"},[t._m(0),a("tbody",[t._m(1),a("tr",[a("td",[a("router-link",{attrs:{to:t.undelivered_count[0].link}},[t._v(t._s(t.undelivered_count[0].label))])],1),a("td",[t._v(t._s(t.undelivered_count[0].dhl.count)+" ("+t._s(t.undelivered_count[0].dhl.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[0].ems.count)+" ("+t._s(t.undelivered_count[0].ems.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[0].other.count)+" ("+t._s(t.undelivered_count[0].other.rate)+"%)")]),a("td",[a("a",{staticClass:"download",attrs:{href:t.undelivered_count[0].downloadlink}},[t._v("Download")])])]),a("tr",[a("td",[a("router-link",{attrs:{to:t.undelivered_count[1].link}},[t._v(t._s(t.undelivered_count[1].label))])],1),a("td",[t._v(t._s(t.undelivered_count[1].dhl.count)+" ("+t._s(t.undelivered_count[1].dhl.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[1].ems.count)+" ("+t._s(t.undelivered_count[1].ems.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[1].other.count)+" ("+t._s(t.undelivered_count[1].other.rate)+"%)")]),a("td",[a("a",{staticClass:"download",attrs:{href:t.undelivered_count[1].downloadlink}},[t._v("Download")])])]),a("tr",[a("td",[a("router-link",{attrs:{to:t.undelivered_count[2].link}},[t._v(t._s(t.undelivered_count[2].label))])],1),a("td",[t._v(t._s(t.undelivered_count[2].dhl.count)+" ("+t._s(t.undelivered_count[2].dhl.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[2].ems.count)+" ("+t._s(t.undelivered_count[2].ems.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[2].other.count)+" ("+t._s(t.undelivered_count[2].other.rate)+"%)")]),a("td",[a("a",{staticClass:"download",attrs:{href:t.undelivered_count[2].downloadlink}},[t._v("Download")])])]),a("tr",[a("td",[a("router-link",{attrs:{to:t.undelivered_count[3].link}},[t._v(t._s(t.undelivered_count[3].label))])],1),a("td",[t._v(t._s(t.undelivered_count[3].dhl.count)+" ("+t._s(t.undelivered_count[3].dhl.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[3].ems.count)+" ("+t._s(t.undelivered_count[3].ems.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[3].other.count)+" ("+t._s(t.undelivered_count[3].other.rate)+"%)")]),a("td",[a("a",{staticClass:"download",attrs:{href:t.undelivered_count[3].downloadlink}},[t._v("Download")])])]),t._m(2),a("tr",[a("td",[a("router-link",{attrs:{to:t.undelivered_count[4].link}},[t._v(t._s(t.months[(new Date).getMonth()]))])],1),a("td",[t._v(t._s(t.undelivered_count[4].dhl.count)+" ("+t._s(t.undelivered_count[4].dhl.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[4].ems.count)+" ("+t._s(t.undelivered_count[4].ems.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[4].other.count)+" ("+t._s(t.undelivered_count[4].other.rate)+"%)")]),a("td",[a("a",{staticClass:"download",attrs:{href:t.undelivered_count[4].downloadlink}},[t._v("Download")])])]),a("tr",[a("td",[a("router-link",{attrs:{to:t.undelivered_count[5].link}},[t._v(t._s(t.months[(new Date).getMonth()-1>=0?(new Date).getMonth()-1:(new Date).getMonth()+11]))])],1),a("td",[t._v(t._s(t.undelivered_count[5].dhl.count)+" ("+t._s(t.undelivered_count[5].dhl.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[5].ems.count)+" ("+t._s(t.undelivered_count[5].ems.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[5].other.count)+" ("+t._s(t.undelivered_count[5].other.rate)+"%)")]),a("td",[a("a",{staticClass:"download",attrs:{href:t.undelivered_count[5].downloadlink}},[t._v("Download")])])]),a("tr",[a("td",[a("router-link",{attrs:{to:t.undelivered_count[6].link}},[t._v(t._s(t.months[(new Date).getMonth()-2>=0?(new Date).getMonth()-2:(new Date).getMonth()+10]))])],1),a("td",[t._v(t._s(t.undelivered_count[6].dhl.count)+" ("+t._s(t.undelivered_count[6].dhl.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[6].ems.count)+" ("+t._s(t.undelivered_count[6].ems.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[6].other.count)+" ("+t._s(t.undelivered_count[6].other.rate)+"%)")]),a("td",[a("a",{staticClass:"download",attrs:{href:t.undelivered_count[6].downloadlink}},[t._v("Download")])])]),t._m(3),a("tr",[a("td",[a("router-link",{attrs:{to:"/undelivered"}},[t._v("All")])],1),a("td",[t._v(t._s(t.undelivered_count[7].dhl.count)+" ("+t._s(t.undelivered_count[7].dhl.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[7].ems.count)+" ("+t._s(t.undelivered_count[7].ems.rate)+"%)")]),a("td",[t._v(t._s(t.undelivered_count[7].other.count)+" ("+t._s(t.undelivered_count[7].other.rate)+"%)")]),a("td",[a("a",{staticClass:"download",attrs:{href:t.undelivered_count[7].downloadlink}},[t._v("Download")])])])])])])])])},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{span:"col"}}),a("th",{attrs:{span:"col"}},[t._v("DHL")]),a("th",{attrs:{span:"col"}},[t._v("EMS")]),a("th",{attrs:{span:"col"}},[t._v("Air/SAL")]),a("th",{attrs:{span:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"t_blank_row"},[a("td",{staticClass:"t_blank_row",attrs:{colspan:"5"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"t_blank_row"},[a("td",{staticClass:"t_blank_row",attrs:{colspan:"5"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"t_blank_row"},[a("td",{staticClass:"t_blank_row",attrs:{colspan:"5"}})])}],y=(a("99af"),a("4de4"),a("4160"),a("c975"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col card text-white bg-dark"},[t._m(0),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[t._v("Total records: "+t._s(t.allTrackingData.length))]),a("p",{staticClass:"card-text"},[a("b",[t._v("Worldwide average shipping times:")]),a("br"),a("i",[t._v("*last 30 days (Overall)")]),a("br"),a("span",[t._v("DHL: "+t._s(t.dhl_avg_time(0,30))+" days ("+t._s(t.dhl_avg_time(0,9999))+" days)")]),a("br"),a("span",[t._v("EMS: "+t._s(t.ems_avg_time(0,30))+" days ("+t._s(t.ems_avg_time(0,9999))+" days)")]),a("br"),a("span",[t._v("Air/SAL: "+t._s(t.other_avg_time(0,30))+" days ("+t._s(t.other_avg_time(0,9999))+" days)")])])])])}),w=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("h2",[t._v("Data status")])])}],C={name:"DataStatus",computed:Object(d["c"])(["allTrackingData"]),methods:{dhl_avg_time:function(t,e){var a=this.allTrackingData.filter((function(t){return"INVALID"!=t.carrier})),r=0,n=0,s=Date.now()-864e5*parseInt(t),d=Date.now()-864e5*parseInt(e);return a.forEach((function(t){"DHL"==t.carrier&&t.shippeddate>d&&s>=t.shippeddate&&t.delivereddate-t.shippeddate>0&&(r+=(t.delivereddate-t.shippeddate)/864e5,n++)})),Math.round(100*r/n)/100},ems_avg_time:function(t,e){var a=this.allTrackingData.filter((function(t){return"INVALID"!=t.carrier})),r=0,n=0,s=Date.now()-864e5*parseInt(t),d=Date.now()-864e5*parseInt(e);return a.forEach((function(t){"DHL"!=t.carrier&&0==t.tracking.indexOf("EM")&&t.shippeddate>d&&s>=t.shippeddate&&t.delivereddate-t.shippeddate>0&&(r+=(t.delivereddate-t.shippeddate)/864e5,n++)})),Math.round(100*r/n)/100},other_avg_time:function(t,e){var a=this.allTrackingData.filter((function(t){return"INVALID"!=t.carrier})),r=0,n=0,s=Date.now()-864e5*parseInt(t),d=Date.now()-864e5*parseInt(e);return a.forEach((function(t){"DHL"!=t.carrier&&0!=t.tracking.indexOf("EM")&&t.shippeddate>d&&s>=t.shippeddate&&t.delivereddate-t.shippeddate>0&&(r+=(t.delivereddate-t.shippeddate)/864e5,n++)})),Math.round(100*r/n)/100}}},D=C,T=Object(u["a"])(D,y,w,!1,null,"4a34fca8",null),S=T.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col card text-white bg-dark"},[t._m(0),a("div",{staticClass:"card-body"},[t.status.last_tracked?a("div",{staticClass:"card-text"},[a("div",[a("b",[t._v("Last tracked "+t._s(t.status.last_tracked.count)+" records at "+t._s(t.status.last_tracked.date))])]),a("br"),a("p",{class:{done:100==t.status.JP_scraping_counter.done}},[t._v(" JP scraping at "+t._s(t.status.JP_scraping_counter.done)+"% done with "+t._s(t.status.JP_scraping_counter.count)+" tracked records. "),t.status.JP_scraping_counter.nowtracking.length>0?a("b",[t._v("("+t._s(t.status.JP_scraping_counter.nowtracking)+")")]):t._e()]),a("p",{class:{done:100==t.status.DHL_scraping_counter.done}},[t._v(" DHL scraping at "+t._s(t.status.DHL_scraping_counter.done)+"% done with "+t._s(t.status.DHL_scraping_counter.count)+" tracked records. "),t.status.DHL_scraping_counter.nowtracking.length>0?a("b",[t._v("("+t._s(t.status.DHL_scraping_counter.nowtracking)+")")]):t._e()]),a("p",{class:{done:100==t.status.DHL_API_counter.done}},[t._v(" DHL API at "+t._s(t.status.DHL_API_counter.done)+"% done with "+t._s(t.status.DHL_API_counter.count)+" tracked records. "),t.status.DHL_API_counter.nowtracking.length>0?a("b",[t._v("("+t._s(t.status.DHL_API_counter.nowtracking)+")")]):t._e()]),a("p",{class:{done:100==t.status.USPS_API_counter.done}},[t._v(" USPS API at "+t._s(t.status.USPS_API_counter.done)+"% done with "+t._s(t.status.USPS_API_counter.count)+" tracked records. "),t.status.USPS_API_counter.nowtracking.length>0?a("b",[t._v("("+t._s(t.status.USPS_API_counter.nowtracking)+")")]):t._e()])]):t._e(),a("a",{staticClass:"btn btn-link",on:{click:function(e){return t.updateStatus()}}},[t._v("Refresh")])])])},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("h2",[t._v("Tracking status")])])}],L=a("7338"),M=a.n(L),O={name:"TrackingStatus",data:function(){return{status:{}}},methods:{updateStatus:function(){var t=this;M.a.get("/api/getstatus").then((function(e){return t.status=e.data})).catch((function(t){return console.log(t)}))}},created:function(){this.updateStatus()}},j=O,A=(a("75f9"),Object(u["a"])(j,x,E,!1,null,"00facf50",null)),I=A.exports,$={name:"Home",components:{DataStatus:S,TrackingStatus:I},data:function(){var t=Date.now(),e=864e5,a=new Date(t),r={this_month_start:new Date(a.getFullYear(),a.getMonth(),1,0,0,0,0).getTime(),last_month_start:new Date(a.getFullYear(),a.getMonth()-1,1,0,0,0,0).getTime(),lastlast_month_start:new Date(a.getFullYear(),a.getMonth()-2,1,0,0,0,0).getTime()};return{months:["January","February","March","April","May","June","July","August","September","October","November","December"],undelivered_count:[{label:"Last 7 days",link:"/undelivered?start=".concat(t-7*e,"&end=").concat(t),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&shippedfrom=".concat(t-7*e,"&shippedto=").concat(t,"&done=0"),start:t-7*e,end:t,dhl:{count:0,rate:0},ems:{count:0,rate:0},other:{count:0,rate:0}},{label:"7-30 days ago",link:"/undelivered?start=".concat(t-30*e,"&end=").concat(t-7*e),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&shippedfrom=".concat(t-30*e,"&shippedto=").concat(t-7*e,"&done=0"),start:t-30*e,end:t-7*e,dhl:{count:0,rate:0},ems:{count:0,rate:0},other:{count:0,rate:0}},{label:"30-90 days ago",link:"/undelivered?start=".concat(t-90*e,"&end=").concat(t-30*e),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&shippedfrom=".concat(t-90*e,"&shippedto=").concat(t-30*e,"&done=0"),start:t-90*e,end:t-30*e,dhl:{count:0,rate:0},ems:{count:0,rate:0},other:{count:0,rate:0}},{label:"More than 90 days ago",link:"/undelivered?start=".concat(0,"&end=",t-90*e),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&shippedfrom=".concat(0,"&shippedto=",t-90*e,"&done=0"),start:0,end:t-90*e,dhl:{count:0,rate:0},ems:{count:0,rate:0},other:{count:0,rate:0}},{label:"This month",link:"/undelivered?start=".concat(r.this_month_start,"&end=").concat(t),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&shippedfrom=".concat(r.this_month_start,"&shippedto=").concat(t,"&done=0"),start:r.this_month_start,end:t,dhl:{count:0,rate:0},ems:{count:0,rate:0},other:{count:0,rate:0}},{label:"Last month",link:"/undelivered?start=".concat(r.last_month_start,"&end=").concat(r.this_month_start),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&shippedfrom=".concat(r.last_month_start,"&shippedto=").concat(r.this_month_start,"&done=0"),start:r.last_month_start,end:r.this_month_start,dhl:{count:0,rate:0},ems:{count:0,rate:0},other:{count:0,rate:0}},{label:"Last last month",link:"/undelivered?start=".concat(r.lastlast_month_start,"&end=").concat(r.last_month_start),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&shippedfrom=".concat(r.lastlast_month_start,"&shippedto=").concat(r.last_month_start,"&done=0"),start:r.lastlast_month_start,end:r.last_month_start,dhl:{count:0,rate:0},ems:{count:0,rate:0},other:{count:0,rate:0}},{label:"All",link:"/undelivered",downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&shippedfrom=".concat(0,"&shippedto=",t,"&done=0"),start:0,end:t,dhl:{count:0,rate:0},ems:{count:0,rate:0},other:{count:0,rate:0}}]}},computed:Object(d["c"])(["allTrackingData"]),methods:{updater:function(){var t=this.allTrackingData.filter((function(t){return"INVALID"!=t.carrier}));0==t.length?setTimeout(this.updater,1e3):this.undelivered_count.forEach((function(e){var a={dhl:0,ems:0,other:0};t.forEach((function(t){t.shippeddate>e.start&&e.end>=t.shippeddate&&("DHL"==t.carrier&&(a.dhl++,0==t.done&&e.dhl.count++),0==t.tracking.indexOf("EM")&&(a.ems++,0==t.done&&e.ems.count++),0!=t.tracking.indexOf("EM")&&"DHL"!=t.carrier&&(a.other++,0==t.done&&e.other.count++))})),e.dhl.rate=Math.round(e.dhl.count/(0==a.dhl?1:a.dhl)*1e3)/10,e.ems.rate=Math.round(e.ems.count/(0==a.ems?1:a.ems)*1e3)/10,e.other.rate=Math.round(e.other.count/(0==a.other?1:a.other)*1e3)/10}))}},created:function(){this.updater()}},P=$,H=Object(u["a"])(P,b,k,!1,null,"5f5e3f64",null),R=H.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[t.$route.query.start?a("h2",[t._v("Undelivered records for "+t._s(new Date(parseInt(t.$route.query.start)).toDateString())+" - "+t._s(new Date(parseInt(t.$route.query.end)).toDateString()))]):a("h2",[t._v("All undelivered records")]),a("p",[t._v("Total records: "+t._s(t.filterdata().length))]),a("TrackingList",{attrs:{data:t.filterdata()}})],1)])])},J=[],U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-striped table-dark"},[t._m(0),a("tbody",t._l(t.data,(function(e){return a("tr",{key:e.id,class:{"bg-success":e.done}},[a("td",[a("router-link",{attrs:{to:t.detailslink(e.tracking)}},[t._v(t._s(e.tracking))])],1),a("td",[t._v(t._s(e.status))]),a("td",[t._v(t._s(new Date(e.shippeddate).toLocaleDateString("ja-JP")))]),a("td",[t._v("-")]),a("td",[t._v(t._s(0==e.delivereddate?"Not arrived":e.shippeddate>=e.delivereddate?"Arrived":new Date(e.delivereddate).toLocaleDateString("ja-JP")))])])})),0)])},V=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Tracking number")]),a("th",{attrs:{scope:"col"}},[t._v("Status")]),a("th",{attrs:{scope:"col",colspan:"3"}},[t._v("Date")])])])}],q={name:"TrackingList",props:["data"],methods:{detailslink:function(t){return"/trackingdetails?tracking=".concat(t)}}},F=q,Y=Object(u["a"])(F,U,V,!1,null,"d2aa8c88",null),G=Y.exports,B={name:"Undelivered",components:{TrackingList:G},computed:Object(d["c"])(["allTrackingData"]),methods:{filterdata:function(){var t=0,e=Date.now();this.$route.query.start&&this.$route.query.end&&(t=parseInt(this.$route.query.start),e=parseInt(this.$route.query.end));var a=this.allTrackingData.filter((function(a){return"INVALID"!=a.carrier&&0==a.done&&a.shippeddate>t&&e>a.shippeddate}));return a}}},K=B,W=Object(u["a"])(K,N,J,!1,null,null,null),Z=W.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("Country list data")]),a("table",{staticClass:"table table-dark table-striped"},[t._m(0),a("tbody",t._l(t.countries,(function(e){return a("tr",{key:e.id},[a("td",[a("router-link",{attrs:{to:e.link}},[t._v(t._s(e.country))])],1),a("td",[t._v(t._s(e.dhl_count))]),a("td",[t._v(t._s(e.ems_count))]),a("td",[t._v(t._s(e.other_count))]),a("td",[e.downloadlink?a("a",{staticClass:"download",attrs:{href:e.downloadlink}},[t._v("Download")]):t._e()])])})),0)])])])])},X=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{span:"col"}},[t._v("Country")]),a("th",{attrs:{span:"col"}},[t._v("DHL")]),a("th",{attrs:{span:"col"}},[t._v("EMS")]),a("th",{attrs:{span:"col"}},[t._v("Air/SAL")]),a("th",{attrs:{span:"col"}})])])}],Q={name:"UndeliveredCountries",computed:Object(d["c"])(["allTrackingData"]),data:function(){return{countries:[]}},created:function(){var t=this,e=this.allTrackingData.filter((function(t){return"INVALID"!=t.carrier&&!t.done}));e.forEach((function(e){for(var a=-1,r=0;r<t.countries.length;r++)if(t.countries[r].country==e.country){a=r;break}-1==a&&(a=t.countries.length,t.countries.push({id:a,country:e.country,link:"/countrydetails?country=".concat(e.country),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&country=".concat(e.country,"&done=0"),dhl_count:0,ems_count:0,other_count:0})),"DHL"==e.carrier?t.countries[a].dhl_count++:0==e.tracking.indexOf("EM")?t.countries[a].ems_count++:t.countries[a].other_count++})),this.countries.sort((function(t,e){return t.dhl_count+t.ems_count+t.other_count>e.dhl_count+e.ems_count+e.other_count?-1:t.dhl_count+t.ems_count+t.other_count<e.dhl_count+e.ems_count+e.other_count?1:0}))}},tt=Q,et=Object(u["a"])(tt,z,X,!1,null,null,null),at=et.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("Status list data")]),a("table",{staticClass:"table table-dark table-striped"},[t._m(0),a("tbody",t._l(t.statuses,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.status))]),a("td",[t._v(t._s(e.count))]),a("td",[e.downloadlink?a("a",{staticClass:"download",attrs:{href:e.downloadlink}},[t._v("Download")]):t._e()])])})),0)])])])])},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{span:"col"}},[t._v("Status")]),a("th",{attrs:{span:"col"}},[t._v("Count")]),a("th",{attrs:{span:"col"}})])])}],st={name:"UndeliveredStatus",computed:Object(d["c"])(["allTrackingData"]),data:function(){return{statuses:[]}},created:function(){var t=this,e=this.allTrackingData.filter((function(t){return"INVALID"!=t.carrier&&!t.done}));e.forEach((function(e){for(var a=-1,r=0;r<t.statuses.length;r++)if(t.statuses[r].status==e.status){a=r;break}-1==a&&(a=t.statuses.length,t.statuses.push({id:a,status:e.status,downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate&status=".concat(e.status),count:0})),t.statuses[a].count++})),this.statuses.sort((function(t,e){return t.count>e.count?-1:t.count<e.count?1:0}));var a=this.statuses.length;this.statuses=this.statuses.filter((function(t){return t.count>1})),this.statuses.push({id:a,status:"Other",count:a-this.statuses.length})}},dt=st,ot=Object(u["a"])(dt,rt,nt,!1,null,null,null),it=ot.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("All records delivered within last 30 days")]),a("TrackingList",{attrs:{data:t.doneTrackings30()}})],1)])])},lt=[],ut={name:"Delivered30days",components:{TrackingList:G},computed:Object(d["c"])(["allTrackingData"]),methods:{doneTrackings30:function(){return this.allTrackingData.filter((function(t){return"INVALID"!=t.carrier&&t.done&&t.delivereddate>Date.now()-2592e6}))}}},ht=ut,_t=Object(u["a"])(ht,ct,lt,!1,null,null,null),vt=_t.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("Country list data (last 90 days)")]),a("table",{staticClass:"table table-dark table-striped"},[t._m(0),a("tbody",t._l(t.countries,(function(e){return a("tr",{key:e.id},[a("td",[a("router-link",{attrs:{to:e.link}},[t._v(t._s(e.country))])],1),e.dhl.count>0?a("td",[t._v(" "+t._s(e.dhl.shortest)+" - "),a("b",[t._v(t._s(e.dhl.averagedays)+" days")]),t._v(" - "+t._s(e.dhl.longest)+" ")]):a("td",[t._v("-")]),e.ems.count>0?a("td",[t._v(" "+t._s(e.ems.shortest)+" - "),a("b",[t._v(t._s(e.ems.averagedays)+" days")]),t._v(" - "+t._s(e.ems.longest)+" ")]):a("td",[t._v("-")]),e.other.count>0?a("td",[t._v(" "+t._s(e.other.shortest)+" - "),a("b",[t._v(t._s(e.other.averagedays)+" days")]),t._v(" - "+t._s(e.other.longest)+" ")]):a("td",[t._v("-")])])})),0)])])])])},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{span:"col"}},[t._v("Country")]),a("th",{attrs:{span:"col"}},[t._v("DHL")]),a("th",{attrs:{span:"col"}},[t._v("EMS")]),a("th",{attrs:{span:"col"}},[t._v("Air/SAL")])])])}],gt={name:"DeliveredCountries90days",computed:Object(d["c"])(["allTrackingData"]),data:function(){return{countries:[]}},created:function(){var t=this,e=864e5,a=this.allTrackingData.filter((function(t){return"INVALID"!=t.carrier&&t.done&&t.delivereddate>Date.now()-7776e6}));a.forEach((function(a){for(var r=-1,n=0;n<t.countries.length;n++)if(t.countries[n].country==a.country){r=n;break}-1==r&&(r=t.countries.length,t.countries.push({id:r,country:a.country,link:"/countrydetails?country=".concat(a.country),dhl:{count:0,totaldays:0,averagedays:0,shortest:9999,longest:0},ems:{count:0,totaldays:0,averagedays:0,shortest:9999,longest:0},other:{count:0,totaldays:0,averagedays:0,shortest:9999,longest:0}}));var s=(a.delivereddate-a.shippeddate)/e;"DHL"==a.carrier?(t.countries[r].dhl.count++,t.countries[r].dhl.totaldays+=s,t.countries[r].dhl.averagedays=Math.round(10*t.countries[r].dhl.totaldays/t.countries[r].dhl.count)/10,t.countries[r].dhl.shortest>s&&(t.countries[r].dhl.shortest=Math.floor(s)),t.countries[r].dhl.longest<s&&(t.countries[r].dhl.longest=Math.ceil(s))):0==a.tracking.indexOf("EM")?(t.countries[r].ems.count++,t.countries[r].ems.totaldays+=s,t.countries[r].ems.averagedays=Math.round(10*t.countries[r].ems.totaldays/t.countries[r].ems.count)/10,t.countries[r].ems.shortest>s&&(t.countries[r].ems.shortest=Math.floor(s)),t.countries[r].ems.longest<s&&(t.countries[r].ems.longest=Math.ceil(s))):(t.countries[r].other.count++,t.countries[r].other.totaldays+=s,t.countries[r].other.averagedays=Math.round(10*t.countries[r].other.totaldays/t.countries[r].other.count)/10,t.countries[r].other.shortest>s&&(t.countries[r].other.shortest=Math.floor(s)),t.countries[r].other.longest<s&&(t.countries[r].other.longest=Math.ceil(s)))})),this.countries.sort((function(t,e){return t.dhl.count+t.ems.count+t.other.count>e.dhl.count+e.ems.count+e.other.count?-1:t.dhl.count+t.ems.count+t.other.count<e.dhl.count+e.ems.count+e.other.count?1:0}))}},ft=gt,bt=Object(u["a"])(ft,pt,mt,!1,null,null,null),kt=bt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("Tracking details for "+t._s(t.thisdata.tracking))]),a("table",{staticClass:"table table-dark table-striped"},[a("tbody",[a("tr",[a("th",[t._v("Added")]),a("td",[t._v(t._s(new Date(t.thisdata.addeddate).toDateString()))]),a("th",[t._v("Last checked")]),a("td",[t._v(t._s(t.thisdata.lastchecked>0?new Date(t.thisdata.lastchecked).toDateString():"Not checked..."))])]),a("tr",[a("th",[t._v("Country")]),a("td",[t._v(t._s(t.thisdata.country))]),a("th",[t._v("Carrier")]),a("td",[t._v(t._s(t.thisdata.carrier))])]),a("tr",[a("th",[t._v("Shipped")]),a("td",[t._v(t._s(new Date(t.thisdata.shippeddate).toDateString()))]),a("th",[t._v("Delivered")]),a("td",[t._v(t._s(t.thisdata.delivereddate>1?new Date(t.thisdata.delivereddate).toDateString():1==t.thisdata.delivereddate?"Delivered":"Not delivered..."))])]),a("tr",[a("th",[t._v("Status")]),a("td",[t._v(t._s(t.thisdata.status))]),a("th",[t._v("Done")]),a("td",[t._v(t._s(t.thisdata.done))])])])]),"DELETED"!=t.thisdata.tracking?a("div",{staticClass:"alert alert-dark d-flex justify-content-around",attrs:{role:"alert"}},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.delivered()}}},[t._v("Set delivered")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.returned()}}},[t._v("Set returned")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.lost()}}},[t._v("Set lost")]),a("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.reset()}}},[t._v("Reset")]),a("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.remove()}}},[t._v("Delete")])]):t._e(),t.thisdata.data.length>0?a("table",{staticClass:"table table-dark table-striped mt-3"},[t._m(0),a("tbody",t._l(JSON.parse(t.thisdata.data).shipments[0].events,(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(new Date(e.timestamp).toDateString()))]),a("td",[t._v(t._s(e.description))]),a("td",[t._v(t._s("string"===typeof e.location?e.location:e.location.address.addressLocality))])])})),0)]):a("pre",[t._v("No data...")])])])])},wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{span:"col"}},[t._v("Time stamp")]),a("th",{attrs:{span:"col"}},[t._v("Status")]),a("th",{attrs:{span:"col"}},[t._v("Location")])])])}],Ct=a("5530"),Dt={name:"TrackingDetails",data:function(){return{thisdata:null}},computed:Object(d["c"])(["allTrackingData"]),methods:Object(Ct["a"])(Object(Ct["a"])({},Object(d["b"])(["updateRecord","deleteRecord"])),{},{updatedata:function(){var t=this;this.thisdata=this.allTrackingData.filter((function(e){return e.tracking==t.$route.query.tracking}))[0]},delivered:function(){this.updateRecord({action:"delivered",tracking:this.thisdata.tracking}),setTimeout(this.updatedata,1500)},returned:function(){this.updateRecord({action:"returned",tracking:this.thisdata.tracking}),setTimeout(this.updatedata,1500)},lost:function(){this.updateRecord({action:"lost",tracking:this.thisdata.tracking}),setTimeout(this.updatedata,1500)},reset:function(){this.updateRecord({action:"reset",tracking:this.thisdata.tracking}),setTimeout(this.updatedata,1500)},remove:function(){this.deleteRecord({action:"delete",tracking:this.thisdata.tracking}),this.thisdata={tracking:"DELETED",addeddate:0,lastchecked:0,country:"DELETED",carrier:"DELETED",shippeddate:0,delivereddate:0,status:"DELETED",done:!0,data:""}}}),created:function(){this.updatedata()}},Tt=Dt,St=Object(u["a"])(Tt,yt,wt,!1,null,null,null),xt=St.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("Country details for "+t._s(t.$route.query.country))]),t._m(0),a("table",{staticClass:"table table-dark table-striped"},[t._m(1),a("tbody",[t._m(2),t._l(t.data_count.slice(0,4),(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(e.label))]),a("td",[t._v(" "+t._s(e.dhl.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.dhl.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.dhl.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.dhl.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.dhl.lost)+"%")]),t._v(") ")]),a("td",[t._v(" "+t._s(e.ems.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.ems.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.ems.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.ems.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.ems.lost)+"%")]),t._v(") ")]),a("td",[t._v(" "+t._s(e.other.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.other.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.other.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.other.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.other.lost)+"%")]),t._v(") ")]),a("td",[a("a",{staticClass:"download",attrs:{href:e.downloadlink}},[t._v("Download")])])])})),t._m(3),t._l(t.data_count.slice(4,7),(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(t.months[e.month_number]))]),a("td",[t._v(" "+t._s(e.dhl.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.dhl.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.dhl.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.dhl.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.dhl.lost)+"%")]),t._v(") ")]),a("td",[t._v(" "+t._s(e.ems.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.ems.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.ems.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.ems.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.ems.lost)+"%")]),t._v(") ")]),a("td",[t._v(" "+t._s(e.other.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.other.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.other.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.other.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.other.lost)+"%")]),t._v(") ")]),a("td",[a("a",{staticClass:"download",attrs:{href:e.downloadlink}},[t._v("Download")])])])})),t._m(4),t._l(t.data_count.slice(7,8),(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(e.label))]),a("td",[t._v(" "+t._s(e.dhl.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.dhl.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.dhl.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.dhl.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.dhl.lost)+"%")]),t._v(") ")]),a("td",[t._v(" "+t._s(e.ems.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.ems.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.ems.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.ems.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.ems.lost)+"%")]),t._v(") ")]),a("td",[t._v(" "+t._s(e.other.count)+" ( "),a("b",{staticClass:"delivered"},[t._v(t._s(e.other.delivered)+"%")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v(t._s(e.other.delayed)+"%")]),t._v(", "),a("b",{staticClass:"returned"},[t._v(t._s(e.other.returned)+"%")]),t._v(", "),a("b",{staticClass:"lost"},[t._v(t._s(e.other.lost)+"%")]),t._v(") ")]),a("td",[a("a",{staticClass:"download",attrs:{href:e.downloadlink}},[t._v("Download")])])])}))],2)]),t._m(5),a("div",{attrs:{id:"graph_area"}})])])])},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" ( "),a("b",{staticClass:"delivered"},[t._v("Delivered")]),t._v(", "),a("b",{staticClass:"delayed"},[t._v("Delayed")]),t._v(", "),a("b",{staticClass:"returned"},[t._v("Returned")]),t._v(", "),a("b",{staticClass:"lost"},[t._v("Lost")]),t._v(") ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{span:"col"}}),a("th",{attrs:{span:"col"}},[t._v("DHL")]),a("th",{attrs:{span:"col"}},[t._v("EMS")]),a("th",{attrs:{span:"col"}},[t._v("Air/SAL")]),a("th",{attrs:{span:"col"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"t_blank_row"},[a("td",{staticClass:"t_blank_row",attrs:{colspan:"5"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"t_blank_row"},[a("td",{staticClass:"t_blank_row",attrs:{colspan:"5"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"t_blank_row"},[a("td",{staticClass:"t_blank_row",attrs:{colspan:"5"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticStyle:{color:"black","background-color":"steelblue",padding:"5px"}},[t._v("Shipped")]),a("span",{staticStyle:{color:"black","background-color":"grey",padding:"5px","margin-left":"2px"}},[t._v("Shipping")]),a("span",{staticStyle:{color:"black","background-color":"green",padding:"5px","margin-left":"2px"}},[t._v("Delivered")]),a("span",{staticStyle:{color:"black","background-color":"orange",padding:"5px","margin-left":"2px"}},[t._v("Returned")]),a("span",{staticStyle:{color:"black","background-color":"red",padding:"5px","margin-left":"2px"}},[t._v("Lost")]),a("span",{staticStyle:{color:"white",border:"3px solid orange",padding:"5px","margin-left":"10px"}},[t._v("DHL")]),a("span",{staticStyle:{color:"white",border:"3px solid red",padding:"5px","margin-left":"2px"}},[t._v("EMS")]),a("span",{staticStyle:{color:"white",border:"3px solid steelblue",padding:"5px","margin-left":"2px"}},[t._v("Air/SAL")])])}],Mt=(a("d81d"),a("5698")),Ot={name:"CountryDetails",computed:Object(d["c"])(["allTrackingData"]),data:function(){var t=this.$route.query.country,e=Date.now(),a=864e5,r=new Date(e),n={this_month_start:new Date(r.getFullYear(),r.getMonth(),1,0,0,0,0).getTime(),last_month_start:new Date(r.getFullYear(),r.getMonth()-1,1,0,0,0,0).getTime(),lastlast_month_start:new Date(r.getFullYear(),r.getMonth()-2,1,0,0,0,0).getTime()};return{months:["January","February","March","April","May","June","July","August","September","October","November","December"],data_count:[{label:"Last 7 days",downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate,delivereddate,done&shippedfrom=".concat(e-7*a,"&shippedto=").concat(e,"&country=").concat(t),start:e-7*a,end:e,dhl:{count:0,delivered:0,delayed:0,returned:0,lost:0},ems:{count:0,delivered:0,delayed:0,returned:0,lost:0},other:{count:0,delivered:0,delayed:0,returned:0,lost:0}},{label:"7-30 days ago",downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate,delivereddate,done&shippedfrom=".concat(e-30*a,"&shippedto=").concat(e-7*a,"&country=").concat(t),start:e-30*a,end:e-7*a,dhl:{count:0,delivered:0,delayed:0,returned:0,lost:0},ems:{count:0,delivered:0,delayed:0,returned:0,lost:0},other:{count:0,delivered:0,delayed:0,returned:0,lost:0}},{label:"30-90 days ago",downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate,delivereddate,done&shippedfrom=".concat(e-90*a,"&shippedto=").concat(e-30*a,"&country=").concat(t),start:e-90*a,end:e-30*a,dhl:{count:0,delivered:0,delayed:0,returned:0,lost:0},ems:{count:0,delivered:0,delayed:0,returned:0,lost:0},other:{count:0,delivered:0,delayed:0,returned:0,lost:0}},{label:"More than 90 days ago",downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate,delivereddate,done&shippedfrom=".concat(0,"&shippedto=",e-90*a,"&country=").concat(t),start:0,end:e-90*a,dhl:{count:0,delivered:0,delayed:0,returned:0,lost:0},ems:{count:0,delivered:0,delayed:0,returned:0,lost:0},other:{count:0,delivered:0,delayed:0,returned:0,lost:0}},{label:"This month",month_number:r.getMonth(),downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate,delivereddate,done&shippedfrom=".concat(n.this_month_start,"&shippedto=").concat(e,"&country=").concat(t),start:n.this_month_start,end:e,dhl:{count:0,delivered:0,delayed:0,returned:0,lost:0},ems:{count:0,delivered:0,delayed:0,returned:0,lost:0},other:{count:0,delivered:0,delayed:0,returned:0,lost:0}},{label:"Last month",month_number:r.getMonth()>1?r.getMonth()-1:11,downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate,delivereddate,done&shippedfrom=".concat(n.last_month_start,"&shippedto=").concat(n.this_month_start,"&country=").concat(t),start:n.last_month_start,end:n.this_month_start,dhl:{count:0,delivered:0,delayed:0,returned:0,lost:0},ems:{count:0,delivered:0,delayed:0,returned:0,lost:0},other:{count:0,delivered:0,delayed:0,returned:0,lost:0}},{label:"Last last month",month_number:r.getMonth()>2?r.getMonth()-2:r.getMonth()+10,downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate,delivereddate,done&shippedfrom=".concat(n.lastlast_month_start,"&shippedto=").concat(n.last_month_start,"&country=").concat(t),start:n.lastlast_month_start,end:n.last_month_start,dhl:{count:0,delivered:0,delayed:0,returned:0,lost:0},ems:{count:0,delivered:0,delayed:0,returned:0,lost:0},other:{count:0,delivered:0,delayed:0,returned:0,lost:0}},{label:"All",downloadlink:"/api/getcsv?columns=tracking,country,status,shippeddate,delivereddate,done&shippedfrom=".concat(0,"&shippedto=",e,"&country=").concat(t),start:0,end:e,dhl:{count:0,delivered:0,delayed:0,returned:0,lost:0},ems:{count:0,delivered:0,delayed:0,returned:0,lost:0},other:{count:0,delivered:0,delayed:0,returned:0,lost:0}}],graph_data:[],countrydata:[]}},methods:{updater:function(){var t=this;this.countrydata=this.allTrackingData.filter((function(e){return"INVALID"!=e.carrier&&e.country==t.$route.query.country})),this.data_count.forEach((function(e){t.countrydata.forEach((function(t){var a={delivered:t.done&&t.delivereddate>0?1:0,delayed:t.done?0:1,returned:t.done&&0==t.delivereddate&&"Returned"==t.status?1:0,lost:t.done&&0==t.delivereddate&&"Lost"==t.status?1:0};t.shippeddate>e.start&&e.end>=t.shippeddate&&("DHL"==t.carrier&&(e.dhl.count++,e.dhl.delivered+=a.delivered,e.dhl.delayed+=a.delayed,e.dhl.returned+=a.returned,e.dhl.lost+=a.lost),0==t.tracking.indexOf("EM")&&(e.ems.count++,e.ems.delivered+=a.delivered,e.ems.delayed+=a.delayed,e.ems.returned+=a.returned,e.ems.lost+=a.lost),0!=t.tracking.indexOf("EM")&&"DHL"!=t.carrier&&(e.other.count++,e.other.delivered+=a.delivered,e.other.delayed+=a.delayed,e.other.returned+=a.returned,e.other.lost+=a.lost))}));var a=(0==e.dhl.count?1:e.dhl.count)/1e3;e.dhl.delivered=Math.round(e.dhl.delivered/a)/10,e.dhl.delayed=Math.round(e.dhl.delayed/a)/10,e.dhl.returned=Math.round(e.dhl.returned/a)/10,e.dhl.lost=Math.round(e.dhl.lost/a)/10,a=(0==e.ems.count?1:e.ems.count)/1e3,e.ems.delivered=Math.round(e.ems.delivered/a)/10,e.ems.delayed=Math.round(e.ems.delayed/a)/10,e.ems.returned=Math.round(e.ems.returned/a)/10,e.ems.lost=Math.round(e.ems.lost/a)/10,a=(0==e.other.count?1:e.other.count)/1e3,e.other.delivered=Math.round(e.other.delivered/a)/10,e.other.delayed=Math.round(e.other.delayed/a)/10,e.other.returned=Math.round(e.other.returned/a)/10,e.other.lost=Math.round(e.other.lost/a)/10}))},drawgraph:function(){var t=this.graph_data,e={top:20,right:20,bottom:30,left:40},a=960-e.left-e.right,r=500-e.top-e.bottom,n=Mt["f"]().range([0,a]).padding(.1),s=Mt["g"]().range([r,0]),d=Mt["h"]("#graph_area").append("svg").attr("width",a+e.left+e.right).attr("height",r+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");n.domain(t.map((function(t,e){return e}))),s.domain([0,Mt["e"](t,(function(t){return t.shipped+t.shipping+t.delivered+t.returned+t.lost}))]),d.selectAll(".lost").data(t).enter().append("rect").attr("class","lost").attr("fill","red").attr("x",(function(t,e){return n(e)})).attr("width",n.bandwidth()).attr("y",(function(t){return s(t.shipped+t.shipping+t.delivered+t.returned+t.lost)})).attr("height",(function(t){return r-s(t.shipped+t.shipping+t.delivered+t.returned+t.lost)})),d.selectAll(".returned").data(t).enter().append("rect").attr("class","returned").attr("fill","orange").attr("x",(function(t,e){return n(e)})).attr("width",n.bandwidth()).attr("y",(function(t){return s(t.shipped+t.shipping+t.delivered+t.returned)})).attr("height",(function(t){return r-s(t.shipped+t.shipping+t.delivered+t.returned)})),d.selectAll(".shipped").data(t).enter().append("rect").attr("class","shipped").attr("fill","steelblue").attr("x",(function(t,e){return n(e)})).attr("width",n.bandwidth()).attr("y",(function(t){return s(t.shipped+t.shipping+t.delivered)})).attr("height",(function(t){return r-s(t.shipped+t.shipping+t.delivered)})),d.selectAll(".shipping").data(t).enter().append("rect").attr("class","shipping").attr("fill","grey").attr("x",(function(t,e){return n(e)})).attr("width",n.bandwidth()).attr("y",(function(t){return s(t.shipping+t.delivered)})).attr("height",(function(t){return r-s(t.shipping+t.delivered)})),d.selectAll(".delivered").data(t).enter().append("rect").attr("class","delivered").attr("fill","green").attr("x",(function(t,e){return n(e)})).attr("width",n.bandwidth()).attr("y",(function(t){return s(t.delivered)})).attr("height",(function(t){return r-s(t.delivered)})),d.append("g").attr("transform","translate(0,"+r+")").call(Mt["a"](n)),d.append("g").call(Mt["b"](s)),s.domain([0,Mt["e"](t,(function(t){return Mt["e"]([t.shipping_time.dhl.averagedays,t.shipping_time.ems.averagedays,t.shipping_time.other.averagedays])}))]),d.append("path").datum(t).attr("fill","none").attr("stroke","orange").attr("stroke-width",3).attr("d",Mt["d"]().x((function(t,e){return n(e)})).y((function(t){return s(t.shipping_time.dhl.averagedays)}))),d.append("path").datum(t).attr("fill","none").attr("stroke","red").attr("stroke-width",3).attr("d",Mt["d"]().x((function(t,e){return n(e)})).y((function(t){return s(t.shipping_time.ems.averagedays)}))),d.append("path").datum(t).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",3).attr("d",Mt["d"]().x((function(t,e){return n(e)})).y((function(t){return s(t.shipping_time.other.averagedays)}))),d.append("g").call(Mt["c"](s))},grapher:function(){var t=this,e=864e5,a=7*e,r=new Date,n=new Date(r.getFullYear(),r.getMonth(),r.getDate()-r.getDay(),0,0,0,0).getTime();this.countrydata.forEach((function(r){var s=n,d=n+a,o=0;while(r.shippeddate<d){if(o+1>t.graph_data.length&&t.graph_data.push({shipped:0,shipping:0,delivered:0,returned:0,lost:0,shipping_time:{dhl:{count:0,totaldays:0,averagedays:0},ems:{count:0,totaldays:0,averagedays:0},other:{count:0,totaldays:0,averagedays:0}}}),"Returned"==r.status)r.shippeddate>=s&&r.shippeddate<d&&t.graph_data[o].returned++;else if("Lost"==r.status)r.shippeddate>=s&&r.shippeddate<d&&t.graph_data[o].lost++;else if(r.shippeddate>=s&&r.shippeddate<d&&(r.delivereddate>=d||r.delivereddate<=1)&&t.graph_data[o].shipped++,r.shippeddate<s&&(r.delivereddate>=d||0==r.delivereddate)&&t.graph_data[o].shipping++,r.delivereddate>=s&&r.delivereddate<d){t.graph_data[o].delivered++;var i=(r.delivereddate-r.shippeddate)/e;"DHL"==r.carrier?(t.graph_data[o].shipping_time.dhl.count++,t.graph_data[o].shipping_time.dhl.totaldays+=i,t.graph_data[o].shipping_time.dhl.averagedays=t.graph_data[o].shipping_time.dhl.totaldays/t.graph_data[o].shipping_time.dhl.count):0==r.tracking.indexOf("EM")?(t.graph_data[o].shipping_time.ems.count++,t.graph_data[o].shipping_time.ems.totaldays+=i,t.graph_data[o].shipping_time.ems.averagedays=t.graph_data[o].shipping_time.ems.totaldays/t.graph_data[o].shipping_time.ems.count):(t.graph_data[o].shipping_time.other.count++,t.graph_data[o].shipping_time.other.totaldays+=i,t.graph_data[o].shipping_time.other.averagedays=t.graph_data[o].shipping_time.other.totaldays/t.graph_data[o].shipping_time.other.count)}d=s,s-=a,o++}})),setTimeout(this.drawgraph,1e3)}},created:function(){this.updater(),this.grapher()}},jt=Ot,At=(a("275d"),Object(u["a"])(jt,Et,Lt,!1,null,"ffcb2bfc",null)),It=At.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("Invalid records")]),a("TrackingList",{attrs:{data:t.invalidTrackings()}})],1)])])},Pt=[],Ht={name:"Maintenance",components:{TrackingList:G},computed:Object(d["c"])(["allTrackingData"]),methods:{invalidTrackings:function(){return this.allTrackingData.filter((function(t){return"INVALID"==t.carrier}))}}},Rt=Ht,Nt=Object(u["a"])(Rt,$t,Pt,!1,null,null,null),Jt=Nt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col"},[a("h2",[t._v("Runtime log")]),a("p",[t._v("Server started at "+t._s(new Date(t.logdata.start).toDateString())+".")]),a("div",{staticClass:"accordion",attrs:{id:"accordion"}},t._l(t.logdata.entries,(function(e,r){return a("div",{key:r,staticClass:"card text-white bg-dark"},[a("div",{staticClass:"card-header",attrs:{id:"heading"+r}},[a("h2",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link link-color",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapse"+r,"aria-expanded":"false","aria-controls":"collapse"+r}},[t._v(t._s(e.status)+" ("+t._s(new Date(e.timestamp).toDateString())+")")])])]),a("div",{staticClass:"collapse",attrs:{id:"collapse"+r,"aria-labelledby":"heading"+r,"data-parent":"#accordion"}},[a("div",{staticClass:"card-body"},[a("pre",[t._v(t._s(e.text))])])])])})),0)])])])},Vt=[],qt={name:"RuntimeLog",data:function(){return{logdata:{}}},created:function(){var t=this;M.a.get("/api/getruntimelog").then((function(e){return t.logdata=e.data})).catch((function(t){return console.log(t)}))}},Ft=qt,Yt=Object(u["a"])(Ft,Ut,Vt,!1,null,null,null),Gt=Yt.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("form",{on:{submit:t.processForm}},[a("label",{attrs:{for:"records"}},[t._v("Records to add")]),t._m(0),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.records,expression:"records"}],staticClass:"form-control",attrs:{cols:"30",rows:"10",required:""},domProps:{value:t.records},on:{input:function(e){e.target.composing||(t.records=e.target.value)}}}),a("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Submit"}})])])])])},Kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("i",{staticClass:"notes"},[a("br"),t._v("tracking1,country1 "),a("br"),t._v("tracking2,country2 "),a("br"),a("br"),t._v("OR "),a("br"),a("br"),t._v("tracking1 "),a("br"),t._v("tracking2 ")])}],Wt=(a("ac1f"),a("1276"),{name:"AddRecords",data:function(){return{records:""}},methods:Object(Ct["a"])(Object(Ct["a"])({},Object(d["b"])(["addRecords"])),{},{processForm:function(t){t.preventDefault();var e=this.records.split(/[\r\n]+/),a={records:[],timestamp:Date.now()};e.forEach((function(t){if(t.indexOf(",")>0){var e=t.split(",");a.records.push({id:e[0],country:e[1]})}else a.records.push({id:t,country:"UNKNOWN"})})),this.addRecords(a),this.records=""}})}),Zt=Wt,zt=(a("3473"),Object(u["a"])(Zt,Bt,Kt,!1,null,"57a1b736",null)),Xt=zt.exports;r["a"].use(f["a"]);var Qt=[{path:"/",name:"Home",component:R},{path:"/undelivered",name:"Undelivered",component:Z},{path:"/undeliveredcountries",name:"UndeliveredCountries",component:at},{path:"/undeliveredstatus",name:"UndeliveredStatus",component:it},{path:"/delivered30",name:"Delivered30days",component:vt},{path:"/deliveredcountries90",name:"DeliveredCountries90days",component:kt},{path:"/trackingdetails",name:"TrackingDetails",component:xt},{path:"/countrydetails",name:"CountryDetails",component:It},{path:"/maintenance",name:"Maintenance",component:Jt},{path:"/runtimelog",name:"RuntimeLog",component:Gt},{path:"/addrecords",name:"AddRecords",component:Xt},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}}],te=new f["a"]({routes:Qt}),ee=te,ae=(a("96cf"),a("1da1")),re={trackings:[]},ne={allTrackingData:function(t){return t.trackings}},se={fetchTrackings:function(t){return Object(ae["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,M.a.get("/api/getall");case 3:r=e.sent,a("setTrackings",r.data);case 5:case"end":return e.stop()}}),e)})))()},addRecords:function(t,e){return Object(ae["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,a.next=3,M.a.post("/api/add",e);case 3:n=a.sent,r("addTrackings",n.data);case 5:case"end":return a.stop()}}),a)})))()},updateRecord:function(t,e){return Object(ae["a"])(regeneratorRuntime.mark((function a(){var r,n,s,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,n=e.action,s=e.tracking,a.next=4,M.a.post("/api/update",{action:n,tracking:s});case 4:d=a.sent,r("updateTrackings",{trackings:d.data,tracking:s});case 6:case"end":return a.stop()}}),a)})))()},deleteRecord:function(t,e){return Object(ae["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,n=e.action,s=e.tracking,a.next=4,M.a.post("/api/update",{action:n,tracking:s});case 4:r("deleteTrackings",s);case 5:case"end":return a.stop()}}),a)})))()}},de={setTrackings:function(t,e){return t.trackings=e},addTrackings:function(t,e){return t.trackings=t.trackings.concat(e)},updateTrackings:function(t,e){var a=e.trackings,r=e.tracking;return t.trackings=t.trackings.filter((function(t){return t.tracking!=r})).concat(a)},deleteTrackings:function(t,e){return t.trackings=t.trackings.filter((function(t){return t.tracking!=e}))}},oe={state:re,getters:ne,actions:se,mutations:de};r["a"].use(d["a"]);var ie=new d["a"].Store({state:{},mutations:{},actions:{},modules:{Trackings:oe}});r["a"].config.productionTip=!1,new r["a"]({router:ee,store:ie,render:function(t){return t(g)}}).$mount("#app")},"75f9":function(t,e,a){"use strict";var r=a("00c6"),n=a.n(r);n.a},"85ec":function(t,e,a){},a4be:function(t,e,a){},b885:function(t,e,a){}});
//# sourceMappingURL=app.f4a537d0.js.map